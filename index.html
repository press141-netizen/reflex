<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reflex - Designer's Archive</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Outfit', sans-serif;
      background: linear-gradient(180deg, #FAFBFC 0%, #F5F7FA 50%, #EEF2F7 100%);
      min-height: 100vh;
    }
    
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }
    
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useMemo, useEffect } = React;

    const TYPES = [
      { id: 'all', name: 'All', emoji: '✦' },
      { id: 'website', name: 'Website', emoji: '◎' },
      { id: 'component', name: 'Component', emoji: '◫' },
    ];

    const CATEGORIES = {
      website: [
        { id: 'all', name: 'All', emoji: '✦' },
        { id: 'landing', name: 'Landing', emoji: '◎' },
        { id: 'portfolio', name: 'Portfolio', emoji: '◐' },
        { id: 'ecommerce', name: 'E-commerce', emoji: '◈' },
        { id: 'dashboard', name: 'Dashboard', emoji: '▣' },
        { id: 'blog', name: 'Blog', emoji: '▤' },
        { id: 'corporate', name: 'Corporate', emoji: '◧' },
        { id: 'experimental', name: 'Experimental', emoji: '◉' },
      ],
      component: [
        { id: 'all', name: 'All', emoji: '✦' },
        { id: 'navigation', name: 'Navigation', emoji: '☰' },
        { id: 'hero', name: 'Hero', emoji: '◐' },
        { id: 'button', name: 'Button', emoji: '▢' },
        { id: 'card', name: 'Card', emoji: '▣' },
        { id: 'form', name: 'Form', emoji: '▤' },
        { id: 'modal', name: 'Modal', emoji: '◳' },
        { id: 'footer', name: 'Footer', emoji: '▥' },
        { id: 'table', name: 'Table', emoji: '▦' },
        { id: 'sidebar', name: 'Sidebar', emoji: '◧' },
        { id: 'toast', name: 'Toast', emoji: '◫' },
        { id: 'dropdown', name: 'Dropdown', emoji: '▼' },
        { id: 'tabs', name: 'Tabs', emoji: '◰' },
        { id: 'carousel', name: 'Carousel', emoji: '◷' },
        { id: 'animation', name: 'Animation', emoji: '✧' },
      ],
    };

    const COLORS = [
      { id: 'all', name: 'All', color: null },
      { id: 'red', name: 'Red', color: '#ef4444' },
      { id: 'orange', name: 'Orange', color: '#f97316' },
      { id: 'yellow', name: 'Yellow', color: '#eab308' },
      { id: 'green', name: 'Green', color: '#22c55e' },
      { id: 'blue', name: 'Blue', color: '#3b82f6' },
      { id: 'purple', name: 'Purple', color: '#8b5cf6' },
      { id: 'pink', name: 'Pink', color: '#ec4899' },
      { id: 'gray', name: 'Gray', color: '#6b7280' },
      { id: 'black', name: 'Black', color: '#1a1a2e' },
      { id: 'white', name: 'White', color: '#ffffff' },
    ];

    const DEFAULT_REFERENCES = [
      {
        id: 1,
        type: 'website',
        title: 'Linear Homepage',
        url: 'https://linear.app',
        thumbnail: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?w=600&h=400&fit=crop',
        category: 'landing',
        tags: ['minimal', 'dark', 'saas', 'animation'],
        note: '깔끔한 애니메이션과 그라데이션 조합',
        addedAt: '2024.12.15',
      },
      {
        id: 2,
        type: 'website',
        title: 'Stripe Press',
        url: 'https://press.stripe.com',
        thumbnail: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=600&h=400&fit=crop',
        category: 'ecommerce',
        tags: ['editorial', 'typography', 'elegant'],
        note: '타이포그래피 중심의 에디토리얼 디자인',
        addedAt: '2024.12.14',
      },
      {
        id: 3,
        type: 'component',
        title: 'Vercel Glassmorphism Nav',
        url: 'https://vercel.com',
        thumbnail: 'https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=600&h=400&fit=crop',
        category: 'navigation',
        tags: ['glassmorphism', 'blur', 'sticky'],
        note: '블러 효과를 활용한 투명 네비게이션',
        addedAt: '2024.12.12',
      },
      {
        id: 4,
        type: 'component',
        title: 'Stripe Gradient Button',
        url: 'https://stripe.com',
        thumbnail: 'https://images.unsplash.com/photo-1557683316-973673baf926?w=600&h=400&fit=crop',
        category: 'button',
        tags: ['gradient', 'hover', 'micro-interaction'],
        note: '호버 시 그라데이션이 움직이는 버튼',
        addedAt: '2024.12.11',
      },
    ];

    function App() {
      const [references, setReferences] = useState(() => {
        const saved = localStorage.getItem('reflex-references');
        return saved ? JSON.parse(saved) : DEFAULT_REFERENCES;
      });
      const [activeType, setActiveType] = useState('all');
      const [activeCategory, setActiveCategory] = useState('all');
      const [searchQuery, setSearchQuery] = useState('');
      const [selectedTags, setSelectedTags] = useState([]);
      const [selectedRef, setSelectedRef] = useState(null);
      const [isAddModalOpen, setIsAddModalOpen] = useState(false);
      const [imageZoom, setImageZoom] = useState(null);
      const [newRef, setNewRef] = useState({
        type: 'website',
        title: '',
        url: '',
        thumbnail: '',
        category: 'landing',
        color: 'all',
        tags: '',
        note: '',
      });
      
      const [uploadedImage, setUploadedImage] = useState(null);
      const [imagePreview, setImagePreview] = useState(null);
      const [isAnalyzing, setIsAnalyzing] = useState(false);
      const [figmaCode, setFigmaCode] = useState(null);
      const [copySuccess, setCopySuccess] = useState(false);

      // Save to localStorage
      useEffect(() => {
        localStorage.setItem('reflex-references', JSON.stringify(references));
      }, [references]);

      const allTags = useMemo(() => {
        const tags = new Set();
        references.forEach(ref => ref.tags.forEach(tag => tags.add(tag)));
        return Array.from(tags).sort();
      }, [references]);

      const currentCategories = useMemo(() => {
        if (activeType === 'all') return [{ id: 'all', name: 'All', emoji: '✦' }];
        return CATEGORIES[activeType] || [];
      }, [activeType]);

      const filteredReferences = useMemo(() => {
        return references.filter(ref => {
          const matchesType = activeType === 'all' || ref.type === activeType;
          const matchesCategory = activeCategory === 'all' || ref.category === activeCategory;
          const matchesSearch = searchQuery === '' || 
            ref.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
            ref.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase())) ||
            ref.note?.toLowerCase().includes(searchQuery.toLowerCase());
          const matchesTags = selectedTags.length === 0 || 
            selectedTags.every(tag => ref.tags.includes(tag));
          return matchesType && matchesCategory && matchesSearch && matchesTags;
        });
      }, [references, activeType, activeCategory, searchQuery, selectedTags]);

      const handleTypeChange = (type) => {
        setActiveType(type);
        setActiveCategory('all');
      };

      const handleTagClick = (tag) => {
        setSelectedTags(prev => 
          prev.includes(tag) ? prev.filter(t => t !== tag) : [...prev, tag]
        );
      };

      const handleImageUpload = async (e) => {
        const file = e.target.files?.[0];
        if (file && file.type.startsWith('image/')) {
          setUploadedImage(file);
          setFigmaCode(null); // 새 이미지 업로드 시 이전 코드 초기화
          const reader = new FileReader();
          reader.onload = async (e) => {
            const base64Image = e.target.result;
            setImagePreview(base64Image);
            // 자동 분석 제거 - 버튼 클릭 시에만 분석
          };
          reader.readAsDataURL(file);
        }
      };

      const handleDrop = async (e) => {
        e.preventDefault();
        const file = e.dataTransfer.files[0];
        if (file && file.type.startsWith('image/')) {
          setUploadedImage(file);
          setFigmaCode(null); // 새 이미지 업로드 시 이전 코드 초기화
          const reader = new FileReader();
          reader.onload = async (e) => {
            const base64Image = e.target.result;
            setImagePreview(base64Image);
            // 자동 분석 제거 - 버튼 클릭 시에만 분석
          };
          reader.readAsDataURL(file);
        }
      };

      const handleGenerateFigmaCode = async () => {
        if (imagePreview) {
          await analyzeImageWithAI(imagePreview);
        }
      };

      const wrapWithDynamicFontSafety = (code) => {
        // Collect Inter styles used and preload them. Preserve weights.
        const styleSet = new Set();
        const regex = /family\s*:\s*["']Inter["']\s*,\s*style\s*:\s*["']([^"']+)["']/g;
        let m;
        while ((m = regex.exec(code)) !== null) {
          styleSet.add(m[1]);
        }
        styleSet.add("Regular"); // always

        const preloadLines = Array.from(styleSet).map((style) =>
          `  await figma.loadFontAsync({ family: "Inter", style: ${JSON.stringify(style)} });`
        ).join("\n");

        const trimmed = String(code || "").trim();
        const hasIIFE = /^\(async\s*\(\)\s*=>\s*\{/.test(trimmed);

        const wrapped = hasIIFE
          ? trimmed
          : `(async () => {\n${trimmed}\n})();`;

        // Inject preload right after async IIFE opening
        const injected = wrapped.replace(
          /^\(async\s*\(\)\s*=>\s*\{\n?/,
          (match) => match + preloadLines + "\n"
        );

        return injected;
      };

      const getImageMetaFromDataUrl = (dataUrl) => {
        return new Promise((resolve) => {
          const img = new Image();
          img.onload = () => resolve({ width: img.naturalWidth || 0, height: img.naturalHeight || 0 });
          img.onerror = () => resolve({ width: 0, height: 0 });
          img.src = dataUrl;
        });
      };

      const analyzeImageWithAI = async (base64Image) => {
        setIsAnalyzing(true);
        setFigmaCode(null);

        try {
          // base64Image is a DataURL here
          const mimeType = String(base64Image).slice(5, String(base64Image).indexOf(";")) || "image/png";
          const base64Data = String(base64Image).split(",")[1] || "";

          const meta = await getImageMetaFromDataUrl(base64Image);

          const response = await fetch('/api/analyze', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              image: base64Data,
              mimeType,
              componentName: 'GeneratedComponent',
              imageWidth: meta.width,
              imageHeight: meta.height
            })
          });

          if (!response.ok) {
            const errText = await response.text();
            throw new Error(`Analyze failed: ${response.status} ${errText}`);
          }

          const result = await response.json();
          const rawCode = result.figmaCode || generateFallbackCode('GeneratedComponent');

          // Safety: ensure fonts are preloaded and async wrapper exists, but DO NOT change weights.
          const safeCode = wrapWithDynamicFontSafety(rawCode);

          setFigmaCode(safeCode);
        } catch (error) {
          console.error('Error analyzing image:', error);
          setFigmaCode(generateFallbackCode('GeneratedComponent'));
        } finally {
          setIsAnalyzing(false);
        }
      };

      const generateFallbackCode = (name) => {
        return `(async () => {
  // Figma Plugin API Code (fallback)
  await figma.loadFontAsync({ family: "Inter", style: "Regular" });
  await figma.loadFontAsync({ family: "Inter", style: "Medium" });

  const component = figma.createComponent();
  component.name = "${name}";
  component.resize(1200, 220);

  const frame = figma.createFrame();
  frame.name = "Container";
  frame.resize(1200, 220);
  frame.fills = [{ type: 'SOLID', color: { r: 1, g: 1, b: 1 } }];
  frame.cornerRadius = 12;
  frame.layoutMode = "VERTICAL";
  frame.primaryAxisSizingMode = "AUTO";
  frame.counterAxisSizingMode = "FIXED";
  frame.paddingTop = 20;
  frame.paddingBottom = 20;
  frame.paddingLeft = 24;
  frame.paddingRight = 24;
  frame.itemSpacing = 16;

  // Header row
  const header = figma.createFrame();
  header.name = "Header";
  header.layoutMode = "HORIZONTAL";
  header.primaryAxisSizingMode = "AUTO";
  header.counterAxisSizingMode = "AUTO";
  header.itemSpacing = 12;
  header.fills = [];

  const icon = figma.createRectangle();
  icon.name = "Icon";
  icon.resize(18, 18);
  icon.cornerRadius = 6;
  icon.fills = [{ type: 'SOLID', color: { r: 0.31, g: 0.36, b: 0.93 } }];

  const label = figma.createText();
  label.name = "Label";
  label.fontName = { family: "Inter", style: "Medium" };
  label.fontSize = 16;
  label.characters = "Research";
  label.fills = [{ type: 'SOLID', color: { r: 0.12, g: 0.14, b: 0.18 } }];

  header.appendChild(icon);
  header.appendChild(label);

  // Title
  const title = figma.createText();
  title.name = "Title";
  title.fontName = { family: "Inter", style: "Medium" };
  title.fontSize = 18;
  title.characters = "You may also want to ask";
  title.fills = [{ type: 'SOLID', color: { r: 0.12, g: 0.14, b: 0.18 } }];

  // Cards row
  const cards = figma.createFrame();
  cards.name = "Cards";
  cards.layoutMode = "HORIZONTAL";
  cards.primaryAxisSizingMode = "AUTO";
  cards.counterAxisSizingMode = "AUTO";
  cards.itemSpacing = 16;
  cards.fills = [];

  const makeCard = (text) => {
    const card = figma.createFrame();
    card.name = "Card";
    card.resize(360, 92);
    card.layoutMode = "VERTICAL";
    card.primaryAxisSizingMode = "FIXED";
    card.counterAxisSizingMode = "FIXED";
    card.paddingTop = 20;
    card.paddingBottom = 20;
    card.paddingLeft = 20;
    card.paddingRight = 20;
    card.cornerRadius = 16;
    card.fills = [{ type: 'SOLID', color: { r: 0.965, g: 0.969, b: 0.98 } }];
    card.strokes = [{ type: 'SOLID', color: { r: 0.91, g: 0.92, b: 0.94 } }];
    card.strokeWeight = 1;

    const t = figma.createText();
    t.fontName = { family: "Inter", style: "Regular" };
    t.fontSize = 16;
    t.lineHeight = { value: 24, unit: "PIXELS" };
    t.characters = text;
    t.fills = [{ type: 'SOLID', color: { r: 0.12, g: 0.14, b: 0.18 } }];

    card.appendChild(t);
    return card;
  };

  cards.appendChild(makeCard("What industries are leading in LLM adoption?"));
  cards.appendChild(makeCard("Can you break down specific use cases?"));
  cards.appendChild(makeCard("What challenges do businesses face with LLMs?"));

  frame.appendChild(header);
  frame.appendChild(title);
  frame.appendChild(cards);

  component.appendChild(frame);
  figma.currentPage.appendChild(component);
  figma.viewport.scrollAndZoomIntoView([component]);
})();`;
      };
const copyToClipboard = async (text) => {
        await navigator.clipboard.writeText(text || figmaCode);
        setCopySuccess(true);
        setTimeout(() => setCopySuccess(false), 2000);
      };

      const resetImageUpload = () => {
        setUploadedImage(null);
        setImagePreview(null);
        setFigmaCode(null);
      };

      const closeAddModal = () => {
        setIsAddModalOpen(false);
        setNewRef({ type: 'website', title: '', url: '', thumbnail: '', category: 'landing', tags: '', note: '' });
        resetImageUpload();
      };

      const handleAddReference = () => {
        if (!newRef.title || !newRef.url) return;
        
        const reference = {
          id: Date.now(),
          type: newRef.type,
          title: newRef.title,
          url: newRef.url,
          thumbnail: imagePreview || newRef.thumbnail || 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?w=600&h=400&fit=crop',
          category: newRef.category,
          tags: newRef.tags.split(',').map(t => t.trim()).filter(Boolean),
          note: newRef.note,
          figmaCode: figmaCode || null,
          addedAt: new Date().toLocaleDateString('ko-KR').replace(/\. /g, '.').slice(0, -1),
        };
        
        setReferences(prev => [reference, ...prev]);
        closeAddModal();
      };

      const handleDeleteReference = (id) => {
        setReferences(prev => prev.filter(ref => ref.id !== id));
        setSelectedRef(null);
      };

      return (
        <div style={styles.container}>
          <div style={styles.bgGradient1} />
          <div style={styles.bgGradient2} />
          <div style={styles.gridOverlay} />

          {/* Header */}
          <header style={styles.header}>
            <div style={styles.headerInner}>
              <div style={styles.logo}>
                <span style={styles.logoIcon}>◈</span>
                <span style={styles.logoText}>Reflex</span>
                <span style={styles.logoBadge}>Designer's Archive</span>
              </div>
              <button style={styles.addButton} onClick={() => setIsAddModalOpen(true)}>
                <span style={styles.addButtonIcon}>+</span>
                Add Reference
              </button>
            </div>
          </header>

          {/* Filter Section */}
          <section style={styles.filterSection}>
            <div style={styles.typeToggle}>
              {TYPES.map(type => (
                <button
                  key={type.id}
                  onClick={() => handleTypeChange(type.id)}
                  style={{
                    ...styles.typeButton,
                    ...(activeType === type.id ? styles.typeButtonActive : {}),
                  }}
                >
                  <span>{type.emoji}</span>
                  {type.name}
                  <span style={styles.typeCount}>
                    {type.id === 'all' ? references.length : references.filter(r => r.type === type.id).length}
                  </span>
                </button>
              ))}
            </div>

            <div style={styles.searchWrapper}>
              <span style={styles.searchIcon}>⌕</span>
              <input
                type="text"
                placeholder="Search by title, tag, or note..."
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
                style={styles.searchInput}
              />
              {searchQuery && (
                <button style={styles.clearSearch} onClick={() => setSearchQuery('')}>✕</button>
              )}
            </div>

            {activeType !== 'all' && (
              <div style={styles.categories}>
                {currentCategories.map(cat => (
                  <button
                    key={cat.id}
                    onClick={() => setActiveCategory(cat.id)}
                    style={{
                      ...styles.categoryButton,
                      ...(activeCategory === cat.id ? styles.categoryButtonActive : {}),
                    }}
                  >
                    <span>{cat.emoji}</span>
                    {cat.name}
                  </button>
                ))}
              </div>
            )}

            {allTags.length > 0 && (
              <div style={styles.tagsSection}>
                <span style={styles.tagsLabel}>Tags</span>
                <div style={styles.tagsList}>
                  {allTags.map(tag => (
                    <button
                      key={tag}
                      onClick={() => handleTagClick(tag)}
                      style={{
                        ...styles.tagButton,
                        ...(selectedTags.includes(tag) ? styles.tagButtonActive : {}),
                      }}
                    >
                      #{tag}
                    </button>
                  ))}
                </div>
                {selectedTags.length > 0 && (
                  <button style={styles.clearTags} onClick={() => setSelectedTags([])}>Clear filters</button>
                )}
              </div>
            )}
          </section>

          {/* Results Count */}
          <div style={styles.resultsCount}>
            <span style={styles.resultsNumber}>{filteredReferences.length}</span>
            <span style={styles.resultsText}>references found</span>
          </div>

          {/* Grid */}
          <main style={styles.grid}>
            {filteredReferences.map((ref, index) => (
              <article
                key={ref.id}
                style={{ ...styles.card, animationDelay: `${index * 0.05}s` }}
                onClick={() => setSelectedRef(ref)}
              >
                <div style={styles.cardImageWrapper}>
                  <img src={ref.thumbnail} alt={ref.title} style={styles.cardImage} />
                  <div style={styles.cardOverlay}>
                    <span style={styles.viewButton}>View Details →</span>
                  </div>
                  <span style={styles.cardCategory}>
                    {TYPES.find(t => t.id === ref.type)?.emoji} {CATEGORIES[ref.type]?.find(c => c.id === ref.category)?.name || ref.category}
                  </span>
                  {ref.type === 'component' && <span style={styles.cardTypeBadge}>Component</span>}
                  {ref.figmaCode && <span style={styles.cardFigmaBadge}>◫</span>}
                </div>
                <div style={styles.cardContent}>
                  <h3 style={styles.cardTitle}>{ref.title}</h3>
                  <p style={styles.cardUrl}>{ref.url.replace(/^https?:\/\//, '')}</p>
                  <div style={styles.cardTags}>
                    {ref.tags.slice(0, 3).map(tag => (
                      <span key={tag} style={styles.cardTag}>#{tag}</span>
                    ))}
                    {ref.tags.length > 3 && <span style={styles.cardTagMore}>+{ref.tags.length - 3}</span>}
                  </div>
                </div>
              </article>
            ))}
          </main>

          {/* Empty State */}
          {filteredReferences.length === 0 && (
            <div style={styles.emptyState}>
              <span style={styles.emptyIcon}>◇</span>
              <p style={styles.emptyText}>No references found</p>
              <p style={styles.emptySubtext}>Try adjusting your filters or add a new reference</p>
            </div>
          )}

          {/* Detail Modal */}
          {selectedRef && (
            <div style={styles.modalOverlay} onClick={() => setSelectedRef(null)}>
              <div style={styles.modal} onClick={e => e.stopPropagation()}>
                <button style={styles.modalClose} onClick={() => setSelectedRef(null)}>✕</button>
                <img 
                  src={selectedRef.thumbnail} 
                  alt={selectedRef.title} 
                  style={styles.modalImage}
                  onClick={() => setImageZoom(selectedRef.thumbnail)}
                />
                <div style={styles.modalContent}>
                  <div style={styles.modalMeta}>
                    <span style={styles.modalType}>
                      {TYPES.find(t => t.id === selectedRef.type)?.emoji} {TYPES.find(t => t.id === selectedRef.type)?.name}
                    </span>
                    <span style={styles.modalDivider}>•</span>
                    <span style={styles.modalCategory}>
                      {CATEGORIES[selectedRef.type]?.find(c => c.id === selectedRef.category)?.name || selectedRef.category}
                    </span>
                    {selectedRef.figmaCode && (
                      <>
                        <span style={styles.modalDivider}>•</span>
                        <span style={styles.figmaReadyBadge}>◫ Figma Ready</span>
                      </>
                    )}
                  </div>
                  <h2 style={styles.modalTitle}>{selectedRef.title}</h2>
                  {selectedRef.url && (
                    <a href={selectedRef.url} target="_blank" rel="noopener noreferrer" style={styles.modalUrl}>
                      {selectedRef.url} ↗
                    </a>
                  )}
                  {selectedRef.note && <p style={styles.modalNote}>{selectedRef.note}</p>}
                  <div style={styles.modalTags}>
                    {selectedRef.tags.map(tag => (
                      <span key={tag} style={styles.modalTag}>#{tag}</span>
                    ))}
                  </div>
                  
                  {selectedRef.figmaCode && (
                    <div style={styles.detailFigmaSection}>
                      <div style={styles.detailFigmaHeader}>
                        <span style={styles.detailFigmaTitle}>◫ Figma Plugin Code</span>
                        <button style={styles.detailCopyButton} onClick={() => copyToClipboard(selectedRef.figmaCode)}>
                          {copySuccess ? '✓ Copied!' : 'Copy Code'}
                        </button>
                      </div>
                      <pre style={styles.detailFigmaCode}>{selectedRef.figmaCode.slice(0, 500)}...</pre>
                    </div>
                  )}
                  
                  <div style={styles.modalFooter}>
                    <span style={styles.modalDate}>Added {selectedRef.addedAt}</span>
                    <button style={styles.deleteButton} onClick={() => handleDeleteReference(selectedRef.id)}>
                      Delete
                    </button>
                  </div>
                </div>
              </div>
            </div>
          )}

          {/* Add Modal */}
          {isAddModalOpen && (
            <div style={styles.modalOverlay} onClick={closeAddModal}>
              <div style={styles.addModal} onClick={e => e.stopPropagation()}>
                <button style={styles.modalClose} onClick={closeAddModal}>✕</button>
                <h2 style={styles.addModalTitle}>Add New Reference</h2>
                
                <div style={styles.addModalGrid}>
                  <div style={styles.addModalForm}>
                    {/* Type Selector */}
                    <div style={styles.formGroup}>
                      <label style={styles.formLabel}>Type *</label>
                      <div style={styles.typeSelector}>
                        <button
                          type="button"
                          onClick={() => setNewRef({...newRef, type: 'website', category: 'landing'})}
                          style={{
                            ...styles.typeSelectorButton,
                            ...(newRef.type === 'website' ? styles.typeSelectorButtonActive : {}),
                          }}
                        >
                          ◎ Website
                        </button>
                        <button
                          type="button"
                          onClick={() => setNewRef({...newRef, type: 'component', category: 'navigation'})}
                          style={{
                            ...styles.typeSelectorButton,
                            ...(newRef.type === 'component' ? styles.typeSelectorButtonActive : {}),
                          }}
                        >
                          ◫ Component
                        </button>
                      </div>
                    </div>

                    {/* Image Upload */}
                    <div style={styles.formGroup}>
                      <label style={styles.formLabel}>
                        Screenshot
                        <span style={styles.formLabelHint}> (Auto-generates Figma code)</span>
                      </label>
                      <div
                        style={{
                          ...styles.imageDropZone,
                          ...(imagePreview ? styles.imageDropZoneWithPreview : {}),
                          ...(isAnalyzing ? styles.imageDropZoneAnalyzing : {}),
                        }}
                        onDrop={handleDrop}
                        onDragOver={(e) => e.preventDefault()}
                        onClick={() => !isAnalyzing && document.getElementById('refImageInput').click()}
                      >
                        {imagePreview ? (
                          <div style={styles.imagePreviewWrapper}>
                            <img src={imagePreview} alt="Preview" style={styles.imagePreviewThumb} />
                            {isAnalyzing && (
                              <div style={styles.analyzingOverlay}>
                                <span style={styles.analyzingSpinner}></span>
                                <span style={styles.analyzingText}>Analyzing with AI...</span>
                              </div>
                            )}
                            {!isAnalyzing && (
                              <button style={styles.removeImageBtn} onClick={(e) => { e.stopPropagation(); resetImageUpload(); }}>✕</button>
                            )}
                            {figmaCode && !isAnalyzing && (
                              <div style={styles.figmaBadge}>
                                <span>✓</span> Figma code ready
                              </div>
                            )}
                          </div>
                        ) : (
                          <div style={styles.imageDropContent}>
                            <span style={styles.imageDropIcon}>↑</span>
                            <p style={styles.imageDropText}>Drop image or click to upload</p>
                          </div>
                        )}
                        <input id="refImageInput" type="file" accept="image/*" onChange={handleImageUpload} style={{ display: 'none' }} />
                      </div>
                      
                      {/* Generate Figma Code 버튼 */}
                      {imagePreview && !figmaCode && (
                        <button
                          style={{
                            ...styles.generateFigmaBtn,
                            ...(isAnalyzing ? styles.generateFigmaBtnDisabled : {}),
                          }}
                          onClick={handleGenerateFigmaCode}
                          disabled={isAnalyzing}
                        >
                          {isAnalyzing ? (
                            <>
                              <span style={styles.btnSpinner}></span>
                              Generating...
                            </>
                          ) : (
                            <>
                              <span>◫</span> Generate Figma Code
                            </>
                          )}
                        </button>
                      )}
                    </div>

                    <div style={styles.formGroup}>
                      <label style={styles.formLabel}>Title *</label>
                      <input
                        type="text"
                        value={newRef.title}
                        onChange={e => setNewRef({...newRef, title: e.target.value})}
                        placeholder="e.g., Linear Homepage"
                        style={styles.formInput}
                      />
                    </div>

                    <div style={styles.formGroup}>
                      <label style={styles.formLabel}>URL</label>
                      <input
                        type="url"
                        value={newRef.url}
                        onChange={e => setNewRef({...newRef, url: e.target.value})}
                        placeholder="https://example.com (optional)"
                        style={styles.formInput}
                      />
                    </div>

                    <div style={styles.formGroup}>
                      <label style={styles.formLabel}>Category</label>
                      <select
                        value={newRef.category}
                        onChange={e => setNewRef({...newRef, category: e.target.value})}
                        style={styles.formSelect}
                      >
                        {CATEGORIES[newRef.type]?.filter(c => c.id !== 'all').map(cat => (
                          <option key={cat.id} value={cat.id}>{cat.emoji} {cat.name}</option>
                        ))}
                      </select>
                    </div>

                    <div style={styles.formGroup}>
                      <label style={styles.formLabel}>Color</label>
                      <div style={styles.colorPicker}>
                        {COLORS.filter(c => c.id !== 'all').map(c => (
                          <button
                            key={c.id}
                            style={{
                              ...styles.colorButton,
                              background: c.color,
                              border: c.id === 'white' ? '1px solid #ddd' : 'none',
                              ...(newRef.color === c.id ? styles.colorButtonActive : {}),
                            }}
                            onClick={(e) => { e.preventDefault(); setNewRef({...newRef, color: c.id}); }}
                            title={c.name}
                          />
                        ))}
                      </div>
                    </div>

                    <div style={styles.formGroup}>
                      <label style={styles.formLabel}>Tags</label>
                      <input
                        type="text"
                        value={newRef.tags}
                        onChange={e => setNewRef({...newRef, tags: e.target.value})}
                        placeholder="minimal, dark, animation (comma separated)"
                        style={styles.formInput}
                      />
                    </div>

                    <div style={styles.formGroup}>
                      <label style={styles.formLabel}>Note</label>
                      <textarea
                        value={newRef.note}
                        onChange={e => setNewRef({...newRef, note: e.target.value})}
                        placeholder="What makes this reference interesting?"
                        style={styles.formTextarea}
                      />
                    </div>

                    <button 
                      style={{
                        ...styles.submitButton,
                        ...(isAnalyzing ? styles.submitButtonDisabled : {}),
                      }}
                      onClick={handleAddReference}
                      disabled={isAnalyzing}
                    >
                      {isAnalyzing ? 'Analyzing...' : 'Add Reference'}
                    </button>
                  </div>

                  {/* Figma Code Preview */}
                  {figmaCode && (
                    <div style={styles.figmaCodeSection}>
                      <div style={styles.figmaCodeHeader}>
                        <h3 style={styles.figmaCodeTitle}>
                          <span style={styles.figmaCodeIcon}>◫</span>
                          Figma Code
                        </h3>
                        <button
                          style={{
                            ...styles.copyCodeButton,
                            ...(copySuccess ? styles.copyCodeButtonSuccess : {}),
                          }}
                          onClick={() => copyToClipboard()}
                        >
                          {copySuccess ? '✓ Copied!' : 'Copy'}
                        </button>
                      </div>
                      <div style={styles.figmaCodeBox}>
                        <pre style={styles.figmaCodePre}>{figmaCode}</pre>
                      </div>
                      <div style={styles.figmaCodeInstructions}>
                        <p><strong>How to use:</strong></p>
                        <p>1. Open Figma → Plugins → Development → Console</p>
                        <p>2. Paste code and press Enter</p>
                      </div>
                    </div>
                  )}
                </div>
              </div>
            </div>
          )}

          {/* Image Zoom Modal */}
          {imageZoom && (
            <div style={styles.zoomOverlay} onClick={() => setImageZoom(null)}>
              <button style={styles.zoomClose} onClick={() => setImageZoom(null)}>✕</button>
              <img src={imageZoom} alt="Zoomed" style={styles.zoomImage} />
            </div>
          )}
        </div>
      );
    }

    const styles = {
      container: {
        minHeight: '100vh',
        position: 'relative',
        overflow: 'hidden',
      },
      bgGradient1: {
        position: 'fixed',
        top: '-20%',
        right: '-10%',
        width: '60vw',
        height: '60vw',
        background: 'radial-gradient(circle, rgba(255,200,150,0.15) 0%, transparent 70%)',
        borderRadius: '50%',
        pointerEvents: 'none',
        animation: 'float 20s ease-in-out infinite',
      },
      bgGradient2: {
        position: 'fixed',
        bottom: '-30%',
        left: '-20%',
        width: '80vw',
        height: '80vw',
        background: 'radial-gradient(circle, rgba(150,180,255,0.1) 0%, transparent 70%)',
        borderRadius: '50%',
        pointerEvents: 'none',
        animation: 'float 25s ease-in-out infinite reverse',
      },
      gridOverlay: {
        position: 'fixed',
        top: 0,
        left: 0,
        right: 0,
        bottom: 0,
        backgroundImage: 'linear-gradient(rgba(0,0,0,0.015) 1px, transparent 1px), linear-gradient(90deg, rgba(0,0,0,0.015) 1px, transparent 1px)',
        backgroundSize: '60px 60px',
        pointerEvents: 'none',
      },
      header: {
        position: 'sticky',
        top: 0,
        zIndex: 100,
        background: 'rgba(250,251,252,0.8)',
        backdropFilter: 'blur(20px)',
        borderBottom: '1px solid rgba(0,0,0,0.05)',
      },
      headerInner: {
        maxWidth: '1400px',
        margin: '0 auto',
        padding: '20px 40px',
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
      },
      logo: {
        display: 'flex',
        alignItems: 'center',
        gap: '12px',
      },
      logoIcon: {
        fontSize: '28px',
        color: '#1a1a2e',
      },
      logoText: {
        fontFamily: '"Space Grotesk", sans-serif',
        fontSize: '26px',
        fontWeight: '700',
        color: '#1a1a2e',
        letterSpacing: '-0.5px',
      },
      logoBadge: {
        fontSize: '11px',
        fontWeight: '500',
        color: '#888',
        background: 'rgba(0,0,0,0.04)',
        padding: '4px 10px',
        borderRadius: '20px',
        letterSpacing: '0.5px',
        textTransform: 'uppercase',
      },
      addButton: {
        display: 'flex',
        alignItems: 'center',
        gap: '8px',
        padding: '12px 24px',
        background: '#1a1a2e',
        color: '#fff',
        border: 'none',
        borderRadius: '12px',
        fontSize: '14px',
        fontWeight: '600',
        fontFamily: '"Outfit", sans-serif',
        cursor: 'pointer',
        transition: 'all 0.3s ease',
        boxShadow: '0 4px 20px rgba(0,0,0,0.08)',
      },
      addButtonIcon: {
        fontSize: '18px',
        fontWeight: '400',
      },
      filterSection: {
        maxWidth: '1400px',
        margin: '0 auto',
        padding: '40px 40px 20px',
      },
      typeToggle: {
        display: 'flex',
        gap: '12px',
        marginBottom: '28px',
      },
      typeButton: {
        display: 'flex',
        alignItems: 'center',
        gap: '10px',
        padding: '14px 24px',
        background: '#fff',
        border: '2px solid rgba(0,0,0,0.06)',
        borderRadius: '14px',
        fontSize: '15px',
        fontWeight: '600',
        fontFamily: '"Outfit", sans-serif',
        color: '#555',
        cursor: 'pointer',
        transition: 'all 0.25s ease',
      },
      typeButtonActive: {
        background: '#1a1a2e',
        borderColor: '#1a1a2e',
        color: '#fff',
      },
      typeCount: {
        fontSize: '12px',
        fontWeight: '500',
        background: 'rgba(0,0,0,0.08)',
        padding: '2px 8px',
        borderRadius: '10px',
      },
      searchWrapper: {
        position: 'relative',
        maxWidth: '600px',
        marginBottom: '30px',
      },
      searchIcon: {
        position: 'absolute',
        left: '20px',
        top: '50%',
        transform: 'translateY(-50%)',
        fontSize: '20px',
        color: '#999',
      },
      searchInput: {
        width: '100%',
        padding: '18px 50px 18px 50px',
        fontSize: '16px',
        fontFamily: '"Outfit", sans-serif',
        border: '2px solid rgba(0,0,0,0.06)',
        borderRadius: '16px',
        background: '#fff',
        outline: 'none',
        transition: 'all 0.3s ease',
        boxShadow: '0 4px 20px rgba(0,0,0,0.03)',
      },
      clearSearch: {
        position: 'absolute',
        right: '16px',
        top: '50%',
        transform: 'translateY(-50%)',
        background: 'rgba(0,0,0,0.05)',
        border: 'none',
        width: '24px',
        height: '24px',
        borderRadius: '50%',
        cursor: 'pointer',
        fontSize: '12px',
        color: '#666',
      },
      categories: {
        display: 'flex',
        gap: '10px',
        flexWrap: 'wrap',
        marginBottom: '24px',
      },
      categoryButton: {
        display: 'flex',
        alignItems: 'center',
        gap: '6px',
        padding: '10px 18px',
        background: '#fff',
        border: '1.5px solid rgba(0,0,0,0.08)',
        borderRadius: '10px',
        fontSize: '14px',
        fontWeight: '500',
        fontFamily: '"Outfit", sans-serif',
        color: '#555',
        cursor: 'pointer',
        transition: 'all 0.2s ease',
      },
      categoryButtonActive: {
        background: '#1a1a2e',
        borderColor: '#1a1a2e',
        color: '#fff',
      },
      tagsSection: {
        display: 'flex',
        alignItems: 'center',
        gap: '16px',
        flexWrap: 'wrap',
      },
      tagsLabel: {
        fontSize: '13px',
        fontWeight: '600',
        color: '#999',
        textTransform: 'uppercase',
        letterSpacing: '1px',
      },
      tagsList: {
        display: 'flex',
        gap: '8px',
        flexWrap: 'wrap',
      },
      tagButton: {
        padding: '6px 14px',
        background: 'transparent',
        border: '1px dashed rgba(0,0,0,0.15)',
        borderRadius: '20px',
        fontSize: '13px',
        fontFamily: '"Outfit", sans-serif',
        color: '#666',
        cursor: 'pointer',
        transition: 'all 0.2s ease',
      },
      tagButtonActive: {
        background: 'rgba(26,26,46,0.08)',
        borderStyle: 'solid',
        borderColor: '#1a1a2e',
        color: '#1a1a2e',
      },
      clearTags: {
        padding: '6px 12px',
        background: 'transparent',
        border: 'none',
        fontSize: '12px',
        fontFamily: '"Outfit", sans-serif',
        color: '#999',
        cursor: 'pointer',
        textDecoration: 'underline',
      },
      resultsCount: {
        maxWidth: '1400px',
        margin: '0 auto',
        padding: '0 40px 20px',
        display: 'flex',
        alignItems: 'baseline',
        gap: '8px',
      },
      resultsNumber: {
        fontFamily: '"Space Grotesk", sans-serif',
        fontSize: '42px',
        fontWeight: '700',
        color: '#1a1a2e',
      },
      resultsText: {
        fontSize: '16px',
        color: '#888',
      },
      grid: {
        maxWidth: '1400px',
        margin: '0 auto',
        padding: '0 40px 80px',
        display: 'grid',
        gridTemplateColumns: 'repeat(auto-fill, minmax(340px, 1fr))',
        gap: '28px',
      },
      card: {
        background: '#fff',
        borderRadius: '20px',
        overflow: 'hidden',
        cursor: 'pointer',
        transition: 'all 0.4s cubic-bezier(0.4, 0, 0.2, 1)',
        boxShadow: '0 4px 20px rgba(0,0,0,0.06)',
        animation: 'fadeInUp 0.6s ease forwards',
        opacity: 0,
      },
      cardImageWrapper: {
        position: 'relative',
        aspectRatio: '16/10',
        overflow: 'hidden',
      },
      cardImage: {
        width: '100%',
        height: '100%',
        objectFit: 'cover',
        transition: 'transform 0.6s ease',
      },
      cardOverlay: {
        position: 'absolute',
        inset: 0,
        background: 'linear-gradient(180deg, transparent 50%, rgba(0,0,0,0.6) 100%)',
        display: 'flex',
        alignItems: 'flex-end',
        justifyContent: 'center',
        padding: '20px',
        opacity: 0,
        transition: 'opacity 0.3s ease',
      },
      viewButton: {
        color: '#fff',
        fontSize: '14px',
        fontWeight: '500',
        padding: '10px 20px',
        background: 'rgba(255,255,255,0.2)',
        borderRadius: '8px',
        backdropFilter: 'blur(10px)',
      },
      cardCategory: {
        position: 'absolute',
        top: '14px',
        left: '14px',
        padding: '6px 12px',
        background: 'rgba(255,255,255,0.95)',
        borderRadius: '8px',
        fontSize: '12px',
        fontWeight: '600',
        color: '#1a1a2e',
        boxShadow: '0 2px 10px rgba(0,0,0,0.1)',
      },
      cardTypeBadge: {
        position: 'absolute',
        top: '14px',
        right: '14px',
        padding: '5px 10px',
        background: 'rgba(99,102,241,0.9)',
        borderRadius: '6px',
        fontSize: '11px',
        fontWeight: '600',
        color: '#fff',
        textTransform: 'uppercase',
        letterSpacing: '0.5px',
      },
      cardFigmaBadge: {
        position: 'absolute',
        bottom: '14px',
        right: '14px',
        width: '28px',
        height: '28px',
        background: 'rgba(34,197,94,0.9)',
        borderRadius: '50%',
        fontSize: '14px',
        color: '#fff',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
      },
      cardContent: {
        padding: '20px',
      },
      cardTitle: {
        fontFamily: '"Space Grotesk", sans-serif',
        fontSize: '18px',
        fontWeight: '600',
        color: '#1a1a2e',
        marginBottom: '6px',
      },
      cardUrl: {
        fontSize: '13px',
        color: '#888',
        marginBottom: '14px',
        overflow: 'hidden',
        textOverflow: 'ellipsis',
        whiteSpace: 'nowrap',
      },
      cardTags: {
        display: 'flex',
        gap: '6px',
        flexWrap: 'wrap',
      },
      cardTag: {
        fontSize: '12px',
        color: '#666',
        background: 'rgba(0,0,0,0.04)',
        padding: '4px 10px',
        borderRadius: '6px',
      },
      cardTagMore: {
        fontSize: '12px',
        color: '#999',
        padding: '4px 8px',
      },
      emptyState: {
        textAlign: 'center',
        padding: '80px 40px',
      },
      emptyIcon: {
        fontSize: '64px',
        color: '#ddd',
        display: 'block',
        marginBottom: '20px',
      },
      emptyText: {
        fontFamily: '"Space Grotesk", sans-serif',
        fontSize: '24px',
        fontWeight: '600',
        color: '#1a1a2e',
        marginBottom: '8px',
      },
      emptySubtext: {
        fontSize: '16px',
        color: '#888',
      },
      modalOverlay: {
        position: 'fixed',
        inset: 0,
        background: 'rgba(0,0,0,0.5)',
        backdropFilter: 'blur(8px)',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        zIndex: 1000,
        padding: '40px',
      },
      modal: {
        background: '#fff',
        borderRadius: '24px',
        maxWidth: '95vw',
        width: '1200px',
        maxHeight: '95vh',
        overflow: 'auto',
        position: 'relative',
      },
      modalClose: {
        position: 'absolute',
        top: '16px',
        right: '16px',
        width: '36px',
        height: '36px',
        background: 'rgba(255,255,255,0.9)',
        border: 'none',
        borderRadius: '50%',
        fontSize: '16px',
        cursor: 'pointer',
        zIndex: 10,
        boxShadow: '0 2px 10px rgba(0,0,0,0.1)',
      },
      modalImage: {
        width: '100%',
        maxHeight: '500px',
        objectFit: 'contain',
        background: '#f5f5f5',
        cursor: 'zoom-in',
      },
      modalContent: {
        padding: '30px',
      },
      modalMeta: {
        display: 'flex',
        alignItems: 'center',
        gap: '10px',
        marginBottom: '12px',
      },
      modalType: {
        fontSize: '13px',
        fontWeight: '600',
        color: '#6366f1',
      },
      modalDivider: {
        color: '#ccc',
      },
      modalCategory: {
        fontSize: '13px',
        fontWeight: '600',
        color: '#888',
      },
      figmaReadyBadge: {
        color: '#22c55e',
        fontWeight: '600',
      },
      modalTitle: {
        fontFamily: '"Space Grotesk", sans-serif',
        fontSize: '28px',
        fontWeight: '700',
        color: '#1a1a2e',
        marginBottom: '12px',
      },
      modalUrl: {
        display: 'inline-block',
        fontSize: '15px',
        color: '#1a1a2e',
        textDecoration: 'none',
        padding: '10px 16px',
        background: 'rgba(0,0,0,0.04)',
        borderRadius: '10px',
        marginBottom: '20px',
      },
      modalNote: {
        fontSize: '16px',
        lineHeight: '1.7',
        color: '#555',
        marginBottom: '20px',
        padding: '16px',
        background: 'rgba(0,0,0,0.02)',
        borderRadius: '12px',
        borderLeft: '3px solid #1a1a2e',
      },
      modalTags: {
        display: 'flex',
        gap: '8px',
        flexWrap: 'wrap',
        marginBottom: '24px',
      },
      modalTag: {
        fontSize: '14px',
        color: '#555',
        background: 'rgba(0,0,0,0.05)',
        padding: '8px 14px',
        borderRadius: '8px',
      },
      detailFigmaSection: {
        marginTop: '20px',
        background: '#1a1a2e',
        borderRadius: '12px',
        padding: '16px',
        marginBottom: '20px',
      },
      detailFigmaHeader: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        marginBottom: '12px',
      },
      detailFigmaTitle: {
        color: '#fff',
        fontSize: '14px',
        fontWeight: '600',
      },
      detailCopyButton: {
        padding: '6px 14px',
        background: 'rgba(255,255,255,0.1)',
        border: '1px solid rgba(255,255,255,0.2)',
        borderRadius: '6px',
        color: '#fff',
        fontSize: '12px',
        cursor: 'pointer',
      },
      detailFigmaCode: {
        background: 'rgba(0,0,0,0.3)',
        borderRadius: '8px',
        padding: '12px',
        margin: 0,
        fontSize: '11px',
        fontFamily: '"SF Mono", monospace',
        color: '#94a3b8',
        lineHeight: '1.5',
        maxHeight: '120px',
        overflow: 'auto',
        whiteSpace: 'pre-wrap',
      },
      modalFooter: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        paddingTop: '20px',
        borderTop: '1px solid rgba(0,0,0,0.06)',
      },
      modalDate: {
        fontSize: '13px',
        color: '#999',
      },
      deleteButton: {
        padding: '10px 20px',
        background: 'transparent',
        border: '1.5px solid #ff4757',
        borderRadius: '10px',
        color: '#ff4757',
        fontSize: '14px',
        fontWeight: '500',
        fontFamily: '"Outfit", sans-serif',
        cursor: 'pointer',
      },
      addModal: {
        background: '#fff',
        borderRadius: '24px',
        maxWidth: '900px',
        width: '100%',
        maxHeight: '90vh',
        overflow: 'auto',
        position: 'relative',
        padding: '40px',
      },
      addModalTitle: {
        fontFamily: '"Space Grotesk", sans-serif',
        fontSize: '26px',
        fontWeight: '700',
        color: '#1a1a2e',
        marginBottom: '30px',
      },
      addModalGrid: {
        display: 'flex',
        gap: '24px',
      },
      addModalForm: {
        flex: '1',
        minWidth: '320px',
      },
      formGroup: {
        marginBottom: '20px',
      },
      formLabel: {
        display: 'block',
        fontSize: '13px',
        fontWeight: '600',
        color: '#555',
        marginBottom: '8px',
        textTransform: 'uppercase',
        letterSpacing: '0.5px',
      },
      formLabelHint: {
        fontWeight: '400',
        color: '#999',
        fontSize: '11px',
        textTransform: 'none',
        letterSpacing: '0',
      },
      typeSelector: {
        display: 'flex',
        gap: '10px',
      },
      typeSelectorButton: {
        flex: 1,
        padding: '14px',
        background: '#fff',
        border: '2px solid rgba(0,0,0,0.08)',
        borderRadius: '12px',
        fontSize: '14px',
        fontWeight: '600',
        fontFamily: '"Outfit", sans-serif',
        color: '#555',
        cursor: 'pointer',
        transition: 'all 0.2s ease',
      },
      typeSelectorButtonActive: {
        background: '#1a1a2e',
        borderColor: '#1a1a2e',
        color: '#fff',
      },
      imageDropZone: {
        border: '2px dashed rgba(0,0,0,0.12)',
        borderRadius: '12px',
        padding: '24px',
        textAlign: 'center',
        cursor: 'pointer',
        transition: 'all 0.3s ease',
        background: 'rgba(0,0,0,0.02)',
      },
      imageDropZoneWithPreview: {
        padding: '0',
        border: '2px solid rgba(99,102,241,0.3)',
      },
      imageDropZoneAnalyzing: {
        borderColor: 'rgba(99,102,241,0.5)',
        background: 'rgba(99,102,241,0.05)',
      },
      imageDropContent: {
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        gap: '8px',
      },
      imageDropIcon: {
        fontSize: '24px',
        color: '#6366f1',
        width: '48px',
        height: '48px',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        background: 'rgba(99,102,241,0.1)',
        borderRadius: '50%',
      },
      imageDropText: {
        fontSize: '14px',
        color: '#666',
      },
      imagePreviewWrapper: {
        position: 'relative',
        width: '100%',
      },
      imagePreviewThumb: {
        width: '100%',
        height: '140px',
        objectFit: 'cover',
        borderRadius: '10px',
      },
      analyzingOverlay: {
        position: 'absolute',
        inset: 0,
        background: 'rgba(99,102,241,0.9)',
        borderRadius: '10px',
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        justifyContent: 'center',
        gap: '12px',
      },
      analyzingSpinner: {
        width: '24px',
        height: '24px',
        border: '3px solid rgba(255,255,255,0.3)',
        borderTopColor: '#fff',
        borderRadius: '50%',
        animation: 'spin 0.8s linear infinite',
      },
      analyzingText: {
        color: '#fff',
        fontSize: '14px',
        fontWeight: '600',
      },
      removeImageBtn: {
        position: 'absolute',
        top: '8px',
        right: '8px',
        width: '28px',
        height: '28px',
        background: 'rgba(0,0,0,0.6)',
        border: 'none',
        borderRadius: '50%',
        color: '#fff',
        fontSize: '12px',
        cursor: 'pointer',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
      },
      figmaBadge: {
        position: 'absolute',
        bottom: '8px',
        left: '8px',
        padding: '6px 12px',
        background: 'rgba(34,197,94,0.9)',
        borderRadius: '6px',
        color: '#fff',
        fontSize: '12px',
        fontWeight: '600',
        display: 'flex',
        alignItems: 'center',
        gap: '6px',
      },
      formInput: {
        width: '100%',
        padding: '14px 16px',
        fontSize: '15px',
        fontFamily: '"Outfit", sans-serif',
        border: '2px solid rgba(0,0,0,0.08)',
        borderRadius: '12px',
        outline: 'none',
      },
      formSelect: {
        width: '100%',
        padding: '14px 16px',
        fontSize: '15px',
        fontFamily: '"Outfit", sans-serif',
        border: '2px solid rgba(0,0,0,0.08)',
        borderRadius: '12px',
        outline: 'none',
        background: '#fff',
        cursor: 'pointer',
      },
      formTextarea: {
        width: '100%',
        padding: '14px 16px',
        fontSize: '15px',
        fontFamily: '"Outfit", sans-serif',
        border: '2px solid rgba(0,0,0,0.08)',
        borderRadius: '12px',
        outline: 'none',
        minHeight: '80px',
        resize: 'vertical',
      },
      submitButton: {
        width: '100%',
        padding: '16px',
        background: '#1a1a2e',
        color: '#fff',
        border: 'none',
        borderRadius: '14px',
        fontSize: '16px',
        fontWeight: '600',
        fontFamily: '"Outfit", sans-serif',
        cursor: 'pointer',
        marginTop: '10px',
      },
      submitButtonDisabled: {
        background: '#ccc',
        cursor: 'not-allowed',
      },
      figmaCodeSection: {
        width: '380px',
        background: '#1a1a2e',
        borderRadius: '16px',
        padding: '20px',
        display: 'flex',
        flexDirection: 'column',
      },
      figmaCodeHeader: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        marginBottom: '16px',
      },
      figmaCodeTitle: {
        display: 'flex',
        alignItems: 'center',
        gap: '8px',
        color: '#fff',
        fontSize: '15px',
        fontWeight: '600',
      },
      figmaCodeIcon: {
        color: '#6366f1',
      },
      copyCodeButton: {
        padding: '8px 16px',
        background: 'rgba(255,255,255,0.1)',
        border: '1px solid rgba(255,255,255,0.2)',
        borderRadius: '8px',
        color: '#fff',
        fontSize: '13px',
        fontWeight: '500',
        cursor: 'pointer',
      },
      copyCodeButtonSuccess: {
        background: 'rgba(34,197,94,0.2)',
        borderColor: 'rgba(34,197,94,0.4)',
        color: '#22c55e',
      },
      figmaCodeBox: {
        flex: 1,
        overflow: 'auto',
        background: 'rgba(0,0,0,0.3)',
        borderRadius: '10px',
        marginBottom: '16px',
        maxHeight: '300px',
      },
      figmaCodePre: {
        padding: '16px',
        margin: 0,
        fontSize: '11px',
        fontFamily: '"SF Mono", "Fira Code", monospace',
        color: '#e2e8f0',
        lineHeight: '1.5',
        whiteSpace: 'pre-wrap',
        wordBreak: 'break-word',
      },
      figmaCodeInstructions: {
        fontSize: '12px',
        color: 'rgba(255,255,255,0.6)',
        lineHeight: '1.6',
      },
      colorPicker: {
        display: 'flex',
        flexWrap: 'wrap',
        gap: '8px',
      },
      colorButton: {
        width: '28px',
        height: '28px',
        borderRadius: '50%',
        cursor: 'pointer',
        transition: 'transform 0.2s',
      },
      colorButtonActive: {
        transform: 'scale(1.2)',
        boxShadow: '0 0 0 3px rgba(99,102,241,0.5)',
      },
      generateFigmaBtn: {
        width: '100%',
        padding: '12px 16px',
        marginTop: '12px',
        background: 'linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)',
        color: '#fff',
        border: 'none',
        borderRadius: '10px',
        fontSize: '14px',
        fontWeight: '600',
        fontFamily: '"Outfit", sans-serif',
        cursor: 'pointer',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        gap: '8px',
        transition: 'all 0.2s ease',
      },
      generateFigmaBtnDisabled: {
        background: '#a5a6f6',
        cursor: 'not-allowed',
      },
      btnSpinner: {
        width: '14px',
        height: '14px',
        border: '2px solid rgba(255,255,255,0.3)',
        borderTopColor: '#fff',
        borderRadius: '50%',
        animation: 'spin 0.8s linear infinite',
      },
      zoomOverlay: {
        position: 'fixed',
        inset: 0,
        background: 'rgba(0,0,0,0.95)',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        zIndex: 2000,
        cursor: 'zoom-out',
      },
      zoomImage: {
        maxWidth: '95vw',
        maxHeight: '95vh',
        objectFit: 'contain',
      },
      zoomClose: {
        position: 'absolute',
        top: '20px',
        right: '20px',
        width: '44px',
        height: '44px',
        background: 'rgba(255,255,255,0.1)',
        border: 'none',
        borderRadius: '50%',
        color: '#fff',
        fontSize: '20px',
        cursor: 'pointer',
      },
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
